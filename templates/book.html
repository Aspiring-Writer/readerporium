{% extends 'base.html' %} {% block content %}
<div class="row">
	<div class="one-third column">
		<img src="{% if book.cover %}{{ book.cover }}{% else %}https://via.placeholder.com/300x400?text=Cover{% endif %}" alt="cover img"{% if book.level == 4 %} class="blur"{% endif %} />
	</div>
	<div class="two-thirds column">

		<div style="text-align: center; margin-bottom: 1rem">
			<a href="{{ url_for('author', id=book.author.id) }}" class="button button-primary">
				<i class="fa-solid fa-user"></i>
				View more by {{ book.author.name }}
			</a>
			<a href="{{ url_for('serie', id=book.series.id) }}" class="button button-primary">
				<i class="fa-solid fa-list-ol"></i>
				{{ book.series.name }}{% if book.series.name != '<None>' %} #{{ book.series_index }}{% endif %}
			</a>
			{% for tag in book.tags|sort(attribute='name') %}
			<a href="{{ url_for('tag', id=tag.id) }}" class="button button-primary">
				<i class="fa-solid fa-tag"></i>
				{{ tag.name }}
			</a>
			{% endfor %}
			<a href="{{ url_for('levels') }}{{ book.level }}" class="button button-primary">
				<i class="fa-solid fa-star"></i>
				{{ book.level }}
			</a>
			<a href="{% if book.wordcount <= 3500 %}{{ url_for('flash_fiction') }}{% elif book.wordcount <= 7500  %}{{ url_for('short_stories') }}{% elif book.wordcount <= 17000 %}{{ url_for('novellettes') }}{% elif book.wordcount <= 40000 %}{{ url_for('novellas') }}{% else %}{{ url_for('novels') }}{% endif %}" class="button button-primary">
				{{ book.wordcount }} words ({% if book.wordcount <= 3500 %}flash fiction{% elif book.wordcount <= 7500  %}short story{% elif book.wordcount <= 17000 %}novellette{% elif book.wordcount <= 40000 %}novella{% else %}novel{% endif %})
			</a>
			<button>
				<i class="fa-solid fa-fingerprint"></i>
				{{ book.isbn }}
			</button>
			<a href="{{ url_for('publisher', id=book.publisher.id) }}" class="button button-primary">
				<i class="fa-solid fa-building"></i>
				{{ book.publisher.name }}
			</a>
		</div>
		

		{% markdown %}{{ book.description }}{% endmarkdown %}

		<p class="alert">
			To download this e-book, you will need an e-book reading app for your device. Popular ones include FBReader, Moon+ Reader, and iBooks.
		</p>
		{% if current_user.username == 'visitor' %}
		<p class="alert">
			Sorry, visitors can't download books.
		</p>
		{% else %}
		<table class="u-full-width">
		  <thead>
		    <tr>
		      <th>Format</th>
		      <th>Description</th>
		    </tr>
		  </thead>
		  <tbody>
		  	<!--<tr>
		      <td>
		      	<a href="https://aspiring-writer.gitlab.io/books/{% if book.level == 1 %}Child{% elif book.level == 2 %}Teen{% elif book.level == 3 %}Adult{% else %}Mature{% endif %}/{{ book.author.name }}/{{ book.title }}">
		      		<i class="fa-solid fa-book-open-reader"></i>
		      		Online
		      	</a>
		      </td>
		      <td>
		      	Read this book online here.
		      </td>
		    </tr>-->
		    <tr>
		      <td>
		      	<a href="https://aspiring-writer.gitlab.io/books/{% if book.level == 1 %}Child{% elif book.level == 2 %}Teen{% elif book.level == 3 %}Adult{% else %}Mature{% endif %}/{{ book.author.name }}/{{ book.title }}.epub">
		      		EPUB
		      	</a>
		      </td>
		      <td>
		      	Supported by most e-readers, smartphones, tablets, and computers.
		      </td>
		    </tr>
		    <!--<tr>
		      <td>
		      	<a href="https://aspiring-writer.gitlab.io/books/{% if book.level == 1 %}Child{% elif book.level == 2 %}Teen{% elif book.level == 3 %}Adult{% else %}Mature{% endif %}/{{ book.author.name }}/{{ book.title }}.kepub.epub">
		      		<i class="fa-solid fa-download"></i>
		      		KEPUB
		      	</a>
		      </td>
		      <td>
		      	This is the recommended format for Kobo e-readers.
		      </td>
		    </tr>-->
		    <!--<tr>
		      <td>
		      	<a href="https://aspiring-writer.gitlab.io/books/{% if book.level == 1 %}Child{% elif book.level == 2 %}Teen{% elif book.level == 3 %}Adult{% else %}Mature{% endif %}/{{ book.author.name }}/{{ book.title }}.mobi">
		      		<i class="fa-solid fa-download"></i>
		      		MOBI
		      	</a>
		      </td>
		      <td>
		      	Legacy format for Kindles.
		      </td>
		    </tr>-->
		  </tbody>
		</table>
		{% endif %}
	</div>
</div>


{% endblock %}
